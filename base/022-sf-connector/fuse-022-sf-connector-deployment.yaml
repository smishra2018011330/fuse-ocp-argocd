--- 
apiVersion: apps/v1
kind: Deployment
metadata: 
  creationTimestamp: ~
  labels: 
    app: sf-connector
  name: sf-connector
spec: 
  replicas: 3
  selector: 
    matchLabels: 
      app: sf-connector
  strategy: {}
  template: 
    metadata: 
      creationTimestamp: ~
      labels: 
        app: sf-connector
    spec: 
      containers: 
        - 
          env:
            - name: spring.datasource.url
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_DATASOURCE_URL_DEV_SF-CONNECTOR
            - name: spring.datasource.username
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_DATASOURCE_USER
            - name: spring.datasource.password
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_DATASOURCE_PASSWD
            - name: spring.data.elasticsearch.client.reactive.endpoints
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_DATA_ELASTICSEARCH_CLIENT_REACTIVE_ENDPOINTS
            - name: spring.elasticsearch.rest.uris
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_ELASTICSEARCH_REST_URIS
            - name: mdo.config.jwt_rsk
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: MDO_CONFIG_JWT_RSK
            - name: spring.rabbitmq.username
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_RABBITMQ_USER
            - name: spring.rabbitmq.password
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_RABBITMQ_PASSWD
            - name: spring.rabbitmq.addresses
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_RABBITMQ_ADDRESS
            - name: spring.rabbitmq.host
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_RABBITMQ_HOST
            - name: spring.rabbitmq.port
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SPRING_RABBITMQ_PORT
            - name: server.canonical.url
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SERVER_CANONICAL_URL_IN_SF-CONNECTOR
            - name: server.name
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SERVER_NAME
            - name: sf.token.access.url
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_TOKEN_ACCESS_URL
            - name: sf.token.login.url
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_TOKEN_LOGIN_URL
            - name: sf.bulk.api.max.records
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_BULK_API_MAX_RECORDS
            - name: sf.bulk.api.version
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_BULK_API_VERSION
            - name: sf.object.details.uri
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_OBJECT_DETAIL_URIS
            - name: sf.object.details.uri
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_OBJECT_DETAIL_URI
            - name: sf.object.list.uri
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_OBJECT_LIST_URIS
            - name: sf.object.list.uri
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_OBJECT_LIST_URI
            - name: sf.account.redirect.uri
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_ACCOUNT_REDIRECT_URI
            - name: sf.account.client.id
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SF_ACCOUNT_CLIENT_ID
            - name: management.endpoint.health.show-details
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: MANAGEMENT_ENDPOINT_HEALTH_SHOW-DETAILS
            - name: management.health.defaults.enabled
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: MANAGEMENT_HEALTH_DEFAULTS_ENABLED
            - name: elastic.username
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: ELASTIC_USERNAME
            - name: elastic.password
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: ELASTIC_PASSWORD
            - name: NEW_RELIC_APP_NAME
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: SERVER_CANONICAL_URL_IN_SF-CONNECTOR
            - name: NEW_RELIC_LICENSE_KEY
              valueFrom:
                secretKeyRef:
                  name: ocp-dev-secrets
                  key: NEWRELIC_LICENSE_KEY
            - name: spring.datasource.hikari.connection-timeout
              value: '20000'
            - name: spring.datasource.hikari.minimum-idle
              value: '1'
            - name: spring.datasource.hikari.maximum-pool-size
              value: '10'
            - name: spring.datasource.hikari.idleTimeout
              value: '30000'
            - name: elastic.protocol
              value: https
            - name: elastic.port
              value: '9200'
          securityContext:
            privileged: false 
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: File
          image: "docker.prospecta.com/prospecta/mdo-sf-connector:development"
          name: sf-connector
          ports:
            - name: spring-port
              containerPort: 8080
              protocol: TCP
          resources: {}
      securityContext: {}
      imagePullSecrets:
        - name: nexus-image-pull
---
